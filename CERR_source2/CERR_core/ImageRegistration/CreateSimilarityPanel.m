function CreateSimilarityPanel(handles, option)
%
% Copyright 2010, Joseph O. Deasy, on behalf of the CERR development team.
% 
% This file is part of The Computational Environment for Radiotherapy Research (CERR).
% 
% CERR development has been led by:  Aditya Apte, Divya Khullar, James Alaly, and Joseph O. Deasy.
% 
% CERR has been financially supported by the US National Institutes of Health under multiple grants.
% 
% CERR is distributed under the terms of the Lesser GNU Public License. 
% 
%     This version of CERR is free software: you can redistribute it and/or modify
%     it under the terms of the GNU General Public License as published by
%     the Free Software Foundation, either version 3 of the License, or
%     (at your option) any later version.
% 
% CERR is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY;
% without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.
% See the GNU General Public License for more details.
% 
% You should have received a copy of the GNU General Public License
% along with CERR.  If not, see <http://www.gnu.org/licenses/>.


    %similarityPanel
    handles.similarityPanel = uipanel('Parent',handles.toolPanel,'Units','normalize','FontSize',10,'Title','Registration Parameters',...
                                    'Tag','similarityPanel','Clipping','off',...
                                    'Position',[0 0 1 1],...
                                    'Visible','on');
    dx = 0; dy = 0;                                
    h412 = uicontrol(...
    'Parent',handles.similarityPanel,...
    'FontSize',10,...
    'HorizontalAlignment','right',...
    'Position',[24.6923076923077+dx 294.958333333333+dy 147.141700404859 19.5972222222222],...
    'String','Scale Factor:',...
    'Style','text',...
    'Tag','text89');

    h413 = uicontrol(...
    'Parent',handles.similarityPanel,...
    'FontSize',10,...
    'HorizontalAlignment','right',...
    'Position',[24.6923076923077+dx 261.527777777778+dy 147.141700404859 19.5972222222222],...
    'String','Rotation Scale:',...
    'Style','text',...
    'Tag','text90');

    handles.para.Similarity_ScaleFactor = uicontrol(...
    'Parent',handles.similarityPanel,...
    'FontSize',10,...
    'HorizontalAlignment','left',...
    'Position',[186.797570850203+dx 292.652777777778+dy 98.51012145749 24.2083333333333],...
    'String','10.0',...
    'Style','edit',...
    'Tag','Similarity_ScaleFactor');

    handles.para.Similarity_RS = uicontrol(...
    'Parent',handles.similarityPanel,...
    'FontSize',10,...
    'HorizontalAlignment','left',...
    'Position',[186.797570850203+dx 256.916666666667+dy 98.51012145749 25.3611111111111],...
    'String','1.0',...
    'Style','edit',...
    'Tag','Similarity_RS');

    h416 = uicontrol(...
    'Parent',handles.similarityPanel,...
    'FontSize',10,...
    'HorizontalAlignment','right',...
    'Position',[24.6923076923077+dx 225.791666666667+dy 147.141700404859 19.5972222222222],...
    'String','Translation Scale:',...
    'Style','text',...
    'Tag','text91');

    handles.para.Similarity_TS = uicontrol(...
    'Parent',handles.similarityPanel,...
    'FontSize',10,...
    'HorizontalAlignment','left',...
    'Position',[185.550607287449+dx 221.180555555556+dy 98.51012145749 24.2083333333333],...
    'String','0.0001',...
    'Style','edit',...
    'Tag','Similarity_TS');

    h418 = uicontrol(...
    'Parent',handles.similarityPanel,...
    'FontSize',10,...
    'HorizontalAlignment','right',...
    'Position',[12.2226720647773+dx 191.208333333333+dy 158.364372469636 20.75],...
    'String','Initial Angle(Degree):',...
    'Style','text',...
    'Tag','text92');

    handles.para.Similarity_InitAngle = uicontrol(...
    'Parent',handles.similarityPanel,...
    'FontSize',10,...
    'HorizontalAlignment','left',...
    'Position',[184.303643724696+dx 187.75+dy 98.51012145749 24.2083333333333],...
    'String','0',...
    'Style','edit',...
    'Tag','Similarity_InitAngle');

    handles.para.Similarity_minstep = uicontrol(...
    'Parent',handles.similarityPanel,...
    'FontSize',10,...
    'HorizontalAlignment','left',...
    'Position',[185.550607287449+dx 142.791666666667+dy 97.2631578947369 27.6666666666667],...
    'String','1',...
    'Style','edit',...
    'Tag','Similarity_minstep');

    handles.para.Similarity_maxstep = uicontrol(...
    'Parent',handles.similarityPanel,...
    'FontSize',10,...
    'HorizontalAlignment','left',...
    'Position',[185.550607287449+dx 104.75+dy 97.2631578947369 26.5138888888889],...
    'String','10',...
    'Style','edit',...
    'Tag','Similarity_maxstep');

    h422 = uicontrol(...
    'Parent',handles.similarityPanel,...
    'FontSize',10,...
    'HorizontalAlignment','right',...
    'Position',[25.9392712550608+dx 149.708333333333+dy 147.141700404859 19.5972222222222],...
    'String','Minimum Step:',...
    'Style','text',...
    'Tag','text93');

    h423 = uicontrol(...
    'Parent',handles.similarityPanel,...
    'FontSize',10,...
    'HorizontalAlignment','right',...
    'Position',[25.9392712550608+dx 111.666666666667+dy 147.141700404859 19.5972222222222],...
    'String','Maximum Step:',...
    'Style','text',...
    'Tag','text94');

    h424 = uicontrol(...
    'Parent',handles.similarityPanel,...
    'FontSize',10,...
    'HorizontalAlignment','right',...
    'Position',[25.9392712550608+dx 72.4722222222222+dy 147.141700404859 19.5972222222222],...
    'String','Iteration Number :',...
    'Style','text',...
    'Tag','text95');

    handles.para.Similarity_IterNum = uicontrol(...
    'Parent',handles.similarityPanel,...
    'FontSize',10,...
    'HorizontalAlignment','left',...
    'Position',[185.550607287449+dx 66.7083333333333+dy 97.2631578947369 26.5138888888889],...
    'String','200',...
    'Style','edit',...
    'Tag','Similarity_IterNum');

    if strcmp(option, 'mr')
        vis = 'on';
    else
        vis = 'off';
    end
    
    h426 = uicontrol(...
    'Parent',handles.similarityPanel,...
    'FontSize',10,...
    'HorizontalAlignment','right',...
    'Position',[33.421052631579+dx 22.9027777777778+dy 147.141700404858 19.5972222222222],...
    'String','Registration Levels:',...
    'Style','text', 'visible', vis, ...
    'Tag','text108');

    handles.para.Similarity_RegLevels = uicontrol(...
    'Parent',handles.similarityPanel,...
    'FontSize',10,...
    'HorizontalAlignment','left',...
    'Position',[184.303643724696+dx 18.2916666666667+dy 98.51012145749 24.2083333333333],...
    'String','3',...
    'Style','edit', 'visible', vis, ...
    'Tag','Similarity_RegLevels');

    h428 = uicontrol(...
    'Parent',handles.similarityPanel,...
    'Position',[1+dx 47+dy 308 16.1],...
    'String','-----------------------------------------------------------------------------',...
    'Style','text', 'visible', vis, ...
    'Tag','text109');

    guidata(handles.mainframe, handles);
    
end

    